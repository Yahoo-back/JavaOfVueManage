webpackJsonp([50],{"8vjw":function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n","",{version:3,sources:["E:/ROOT/src/view/tables/components/canEditTable.vue"],names:[],mappings:";AACA;EACE,cAAc;EACd,mBAAmB;CACpB;AACD;EACE,sBAAsB;CACvB",file:"canEditTable.vue",sourcesContent:["\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n"],sourceRoot:""}])},FgrM:function(t,e,i){"use strict";var n=function(t,e,i,n){return e("Button",{props:{type:i.editting?"success":"primary",loading:i.saving},style:{margin:"0 5px"},on:{click:function(){if(i.editting){t.edittingStore[n].saving=!0,t.thisTableData=JSON.parse(JSON.stringify(t.edittingStore));var e=t.edittingStore[n];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse(JSON.stringify(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),n)}else{if(i.edittingCell)for(var a in i.edittingCell)i.edittingCell[a]=!1,t.edittingStore[n].edittingCell[a]=!1;t.edittingStore[n].editting=!0,t.thisTableData=JSON.parse(JSON.stringify(t.edittingStore))}}}},i.editting?"保存":"编辑")},a=function(t,e,i,n){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){t.thisTableData.splice(n,1),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-delete",t.handleBackdata(t.thisTableData),n)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])},r=function(t,e,i){return t.hoverShow?e("div",{class:{"show-edit-btn":t.hoverShow}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[i.index].edittingCell[i.column.key]=!0,t.thisTableData=JSON.parse(JSON.stringify(t.edittingStore))}}})]):e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[i.index].edittingCell[i.column.key]=!0,t.thisTableData=JSON.parse(JSON.stringify(t.edittingStore))}}})},o=function(t,e,i){return e("Button",{props:{type:"text",icon:"checkmark"},on:{click:function(e){t.edittingStore[i.index].edittingCell[i.column.key]=!1,t.thisTableData=JSON.parse(JSON.stringify(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-cell-change",t.handleBackdata(t.thisTableData),i.index,i.column.key)}}})},l=function(t,e,i,n){return e("Input",{props:{type:"text",value:t.edittingStore[i.index][n.key]},on:{"on-change":function(e){var a=n.key;t.edittingStore[i.index][a]=e.target.value}}})};e.a={name:"canEditTable",props:{refs:String,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var t=this,e=this,i=this.columnsList.filter(function(t){if(t.editable&&!0===t.editable)return t}),s=JSON.parse(JSON.stringify(this.value)),d=[];d=s.map(function(e,n){var a=!1;if(t.thisTableData[n])if(t.thisTableData[n].editting)a=!0;else for(var r in t.thisTableData[n].edittingCell)!0===t.thisTableData[n].edittingCell[r]&&(a=!0);if(a)return t.thisTableData[n];t.$set(e,"editting",!1);var o={};return i.forEach(function(t){o[t.key]=!1}),t.$set(e,"edittingCell",o),e}),this.thisTableData=d,this.edittingStore=JSON.parse(JSON.stringify(this.thisTableData)),this.columnsList.forEach(function(i){i.editable&&(i.render=function(n,a){var s=t.thisTableData[a.index];return s.editting?n("Input",{props:{type:"text",value:s[i.key]},on:{"on-change":function(t){var i=a.column.key;e.edittingStore[a.index][i]=t.target.value}}}):t.editIncell?n("Row",{props:{type:"flex",align:"middle",justify:"center"}},[n("Col",{props:{span:"22"}},[s.edittingCell[a.column.key]?l(t,n,a,i):n("span",s[i.key])]),n("Col",{props:{span:"2"}},[s.edittingCell[a.column.key]?o(t,n,a):r(t,n,a)])]):n("span",s[i.key])}),i.handle&&(i.render=function(e,r){var o=t.thisTableData[r.index],l=[];return i.handle.forEach(function(i){"edit"===i?l.push(n(t,e,o,r.index)):"delete"===i&&l.push(a(t,e,0,r.index))}),e("div",l)})})},handleBackdata:function(t){var e=JSON.parse(JSON.stringify(t));return e.forEach(function(t){delete t.editting,delete t.edittingCell,delete t.saving}),e}},watch:{value:function(t){this.init()}}}},GtiQ:function(t,e,i){"use strict";function n(t){i("e2o8")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("FgrM"),r=i("SzOC"),o=i("VU/8"),l=n,s=o(a.a,r.a,l,null,null);e.default=s.exports},SzOC:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Table",{ref:t.refs,attrs:{columns:t.columnsList,data:t.thisTableData,border:"","disabled-hover":""}})],1)},a=[],r={render:n,staticRenderFns:a};e.a=r},e2o8:function(t,e,i){var n=i("8vjw");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("221fa27c",n,!0)}});
//# sourceMappingURL=50.a868508bded01106a785.js.map